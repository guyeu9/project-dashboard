## 详细实现计划

### 1. 数据模型扩展

#### 1.1 扩展Project接口

```typescript
export interface Project {
  id: string
  name: string
  status: 'normal' | 'delayed' | 'risk'
  progress: number
  startDate: string
  endDate: string
  partners: string[]
  developers: string[]
  testers: string[]
  owner: string
  remark?: string
  chatGroupLinks?: string[]
  contacts?: Contact[]
  // 新增字段
  productManager?: string
  pmo?: string
  dailyProgress?: DailyProgress[]  // 每日进度记录
}

export interface DailyProgress {
  date: string
  progress: number
  status: 'normal' | 'risk' | 'delayed'
  content: string
  taskType: 'development' | 'testing' | 'uat' | 'deployment'
}
```

#### 1.2 扩展Task接口

```typescript
export interface Task {
  id: string
  projectId: string
  name: string
  type: TaskType
  status: 'normal' | 'blocked' | 'resolved'
  progress: number
  startDate: string
  endDate: string
  assignees: string[]
  dailyProgress?: string
  remark?: string
  // 新增字段
  dailyRecords?: DailyTaskRecord[]
}

export interface DailyTaskRecord {
  date: string
  progress: number
  status: 'normal' | 'risk' | 'delayed'
  content: string
  assignees: string[]
}
```

### 2. UI界面改造

#### 2.1 5个卡片一排布局

* 使用Ant Design的Row/Col组件，设置span={24/5}=4.8

* 响应式设计，小屏幕下自动动态调整确保一行显示

* 卡片悬停效果和选中状态

#### 2.2 项目甘特图进度条增强

* 显示任务类型和对应人员："开发排期：张三、李四"

* 项目名称下方显示PMO和产品经理r人名小图标

* 每日风险标识显示

* 鼠标悬停显示详细各个阶段的进度内容

#### 2.3 新增每日进度管理

* 在项目详情页添加"每日进度"标签页

* 支持按日期添加进度记录

* 支持设置每日风险状态

* 历史风险记录保留和显示

### 3. 核心功能实现

#### 3.1 任务类型人员映射

```typescript
const getTaskTypePersonnel = (task: Task, project: Project) => {
  const taskType = task.type.name
  switch (taskType) {
    case '开发排期':
    case '开发联调':
      return project.developers
    case '测试排期':
    case '测试联调':
      return project.testers
    case '产品UAT':
      return [project.productManager].filter(Boolean)
    case '上线':
      return [project.pmo].filter(Boolean)
    default:
      return task.assignees
  }
}
```

#### 3.2 每日风险标识系统

* 在甘特图进度条上显示每日风险小图标

* 风险图标使用警告符号，悬停显示详细内容

* 历史风险记录永久保留

* 支持点击查看历史风险详情

* 项目风险判断条件为最新日期的风险标识

#### 3.3 项目人员小图标显示

* 在项目名称下方嵌入小图标

* PMO使用管理图标

* 产品经理使用产品图标

* 点击图标显示人员信息

### 4. 交互逻辑

#### 4.1 卡片筛选逻辑

* 支持单选模式，点击一个卡片时取消其他选中

* 点击已选中的卡片可以取消筛选

* 实时更新甘特图显示

#### 4.2 甘特图交互增强

* 点击进度条显示项目详情弹窗

* 鼠标悬停显示任务详情和人员信息

* 点击风险图标显示当日进度详情

#### 4.3 每日进度管理

* 支持按日期快速添加进度

* 支持批量设置多日进度

* 支持导入导出进度数据

### 5. 数据存储和状态管理

#### 5.1 扩展Zustand状态

* 添加dailyProgress状态

* 添加项目人员信息管理

* 添加每日风险记录管理

#### 5.2 数据持久化

* 使用localStorage存储每日进度

* 支持数据备份和恢复

* 支持数据导出为Excel格式

### 6. 样式和动画

#### 6.1 卡片样式优化

* 5卡片一排，动态调节大小

* 悬停效果和选中状态动画

* 响应式布局适配

#### 6.2 甘特图样式增强

* 进度条显示任务类型和人员

* 风险标识使用醒目颜色

* 悬停效果和平滑过渡

#### 6.3 图标和视觉元素

* 使用Ant Design图标库

* 自定义风险标识图标

* 人员信息小图标设计

这个计划将实现一个功能完整的项目管理系统，支持每日进度跟踪、风险管理和人员协调。
